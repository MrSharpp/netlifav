<%- include ('partials/head') %>
  <body>
    <div class="container mx-auto">
      <form method="post" action="/movies">
        <div class="form-group">
          <label for="name">Movie Name</label>
          <input
            type="text"
            class="form-control"
            id="name"
            name="name"
            placeholder="Movie Name"
            required
          />
        </div>
        <div class="form-group">
          <label for="ratings">Ratings</label>
          <select class="form-control" id="ratings" required name="ratings">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
          </select>
        </div>
        <div class="form-group">
          <label for="genre">Genre</label>
          <input
            type="text"
            class="form-control"
            id="genre"
            name="genre"
            placeholder="Movie Genre"
            required
          />
        </div>
        <div class="form-group">
          <label for="casts">Casts</label>
          <input
            type="text"
            class="form-control"
            id="casts"
            name="casts"
            placeholder="Movie casts"
            required
          />
          <small id="emailHelp" class="form-text text-muted"
            >enter all casts seperated by , (comma)</small
          >
        </div>

        <div class="form-group">
          <label for="release">Release Date</label>
          <input
            type="date"
            class="form-control"
            id="release"
            name="release"
            placeholder="Movie Release Date"
            required
          />
        </div>
        <% if (error) { %>
        <p class="error" style="color: red"><%= error %></p>
        <% } %>
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>

      <table class="table">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Movie</th>
            <th scope="col">Ratings</th>
            <th scope="col">Casts</th>
            <th scope="col">Genre</th>
            <th scope="col">Release Date</th>

            <th scope="col">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% movies.forEach(function(movie, index) { %>
          <tr>
            <th scope="row"><%= index %></th>
            <td><%= movie.name %></td>
            <td><%= movie.ratings %></td>
            <td><%= movie.cast %></td>
            <td><%= movie.releaseDate %></td>

            <td><a href="/movies/edit/<%= movie.id %>">Edit</a> <a href="#">Delete</a></td>
          </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </body>
</html>
